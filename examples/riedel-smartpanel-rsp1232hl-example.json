[
    {
        "id": "rsp1232_example_flow",
        "type": "tab",
        "label": "RIEDEL RSP-1232HL SmartPanel Example",
        "disabled": false,
        "info": "# RIEDEL RSP-1232HL SmartPanel Example\n\nComplete example for RSP-1232HL SmartPanel (32 keys, 4 displays, 4 rotaries, 16 leverkeys).\n\n## Features Demonstrated:\n- Extended key mapping (32 keys)\n- LED color control for all 32 keys\n- 16 LeverKey controls\n- 4 OLED displays\n- 4 rotary encoders\n- Production-ready configuration\n\n## Setup:\n1. Configure nmos-config node with registry URL\n2. Set MQTT broker URL\n3. Select RSP-1232HL preset in panel configuration\n4. Deploy and test with inject nodes"
    },
    {
        "id": "rsp1232_panel",
        "type": "nmos-riedel-artist",
        "z": "rsp1232_example_flow",
        "name": "RSP-1232HL Panel",
        "registry": "",
        "mqttBroker": "mqtt://localhost:1883",
        "deviceLabel": "RSP-1232HL SmartPanel",
        "deviceDescription": "Riedel 1200 series SmartPanel - 32 keys",
        "panelLabel": "SmartPanel 1232",
        "panelType": "smartpanel",
        "smartpanelPreset": "RSP-1232HL",
        "mqttQos": 1,
        "enableAudioRouting": true,
        "enableKeyControl": true,
        "matrixSourceId": "",
        "nodeId": "",
        "deviceId": "",
        "senderId": "",
        "receiverId": "",
        "x": 360,
        "y": 200
    },
    {
        "id": "debug_smartpanel_1232",
        "type": "debug",
        "z": "rsp1232_example_flow",
        "name": "SmartPanel Events",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 620,
        "y": 200
    },
    {
        "id": "comment_extended_keys",
        "type": "comment",
        "z": "rsp1232_example_flow",
        "name": "Extended Key Control (32 Keys)",
        "info": "RSP-1232HL has 32 keys vs 16 in RSP-1216HL",
        "x": 180,
        "y": 40
    },
    {
        "id": "inject_key_bank1",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "Keys 1-8: Green",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 80
    },
    {
        "id": "function_bank1",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Set Bank 1",
        "func": "const messages = [];\nfor (let i = 1; i <= 8; i++) {\n    messages.push({\n        payload: {\n            action: 'set_led_color',\n            keyId: i,\n            color: 'green',\n            brightness: 100\n        }\n    });\n}\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 80
    },
    {
        "id": "inject_key_bank2",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "Keys 9-16: Red",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 120
    },
    {
        "id": "function_bank2",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Set Bank 2",
        "func": "const messages = [];\nfor (let i = 9; i <= 16; i++) {\n    messages.push({\n        payload: {\n            action: 'set_led_color',\n            keyId: i,\n            color: 'red',\n            brightness: 100\n        }\n    });\n}\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 120
    },
    {
        "id": "inject_key_bank3",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "Keys 17-24: Amber",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 160
    },
    {
        "id": "function_bank3",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Set Bank 3",
        "func": "const messages = [];\nfor (let i = 17; i <= 24; i++) {\n    messages.push({\n        payload: {\n            action: 'set_led_color',\n            keyId: i,\n            color: 'amber',\n            brightness: 75\n        }\n    });\n}\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 160
    },
    {
        "id": "inject_key_bank4",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "Keys 25-32: Green",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 200
    },
    {
        "id": "function_bank4",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Set Bank 4",
        "func": "const messages = [];\nfor (let i = 25; i <= 32; i++) {\n    messages.push({\n        payload: {\n            action: 'set_led_color',\n            keyId: i,\n            color: 'green',\n            brightness: 50\n        }\n    });\n}\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 200
    },
    {
        "id": "comment_displays",
        "type": "comment",
        "z": "rsp1232_example_flow",
        "name": "4 Display Configuration",
        "info": "Each display corresponds to 8 keys",
        "x": 160,
        "y": 260
    },
    {
        "id": "inject_display_config",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "Configure All Displays",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 3,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 300
    },
    {
        "id": "function_displays",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Setup Displays",
        "func": "const displayConfigs = [\n    ['Keys 1-8', 'Cameras'],\n    ['Keys 9-16', 'Audio'],\n    ['Keys 17-24', 'Talent'],\n    ['Keys 25-32', 'Crew']\n];\n\nconst messages = [];\n\nfor (let i = 1; i <= 4; i++) {\n    messages.push({\n        payload: {\n            action: 'send_display_text',\n            displayId: i,\n            text: displayConfigs[i-1].join('\\n'),\n            brightness: 100\n        }\n    });\n}\n\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 370,
        "y": 300
    },
    {
        "id": "comment_production",
        "type": "comment",
        "z": "rsp1232_example_flow",
        "name": "Production Setup Example",
        "info": "Example production configuration with multiple zones",
        "x": 180,
        "y": 380
    },
    {
        "id": "inject_production_setup",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "Production Mode",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 420
    },
    {
        "id": "function_production",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Production Configuration",
        "func": "// Setup a typical production configuration\nconst messages = [];\n\n// Camera zone (Keys 1-8) - Green idle\nfor (let i = 1; i <= 8; i++) {\n    messages.push({\n        payload: { action: 'apply_color_profile', keyId: i, profile: 'idle' }\n    });\n}\n\n// Audio zone (Keys 9-16) - Warning state\nfor (let i = 9; i <= 16; i++) {\n    messages.push({\n        payload: { action: 'apply_color_profile', keyId: i, profile: 'warning' }\n    });\n}\n\n// Talent zone (Keys 17-24) - Active\nfor (let i = 17; i <= 24; i++) {\n    messages.push({\n        payload: { action: 'apply_color_profile', keyId: i, profile: 'active' }\n    });\n}\n\n// Crew zone (Keys 25-32) - Off\nfor (let i = 25; i <= 32; i++) {\n    messages.push({\n        payload: { action: 'apply_color_profile', keyId: i, profile: 'off' }\n    });\n}\n\n// Update displays\nmessages.push(\n    { payload: { action: 'send_display_text', displayId: 1, text: 'CAMERAS\\nIDLE' }},\n    { payload: { action: 'send_display_text', displayId: 2, text: 'AUDIO\\nSTANDBY' }},\n    { payload: { action: 'send_display_text', displayId: 3, text: 'TALENT\\nLIVE' }},\n    { payload: { action: 'send_display_text', displayId: 4, text: 'CREW\\nOFFLINE' }}\n);\n\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 420
    },
    {
        "id": "inject_all_off",
        "type": "inject",
        "z": "rsp1232_example_flow",
        "name": "All Keys Off",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 500
    },
    {
        "id": "function_all_off",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Turn Off All LEDs",
        "func": "const messages = [];\n\nfor (let i = 1; i <= 32; i++) {\n    messages.push({\n        payload: {\n            action: 'set_led_color',\n            keyId: i,\n            color: 'off',\n            brightness: 0\n        }\n    });\n}\n\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 350,
        "y": 500
    },
    {
        "id": "comment_event_handling",
        "type": "comment",
        "z": "rsp1232_example_flow",
        "name": "Event Handling Example",
        "info": "Filter and process SmartPanel events",
        "x": 170,
        "y": 560
    },
    {
        "id": "function_event_filter",
        "type": "function",
        "z": "rsp1232_example_flow",
        "name": "Process SmartPanel Events",
        "func": "// Filter and process SmartPanel events\nif (!msg.artist || !msg.artist.commands) {\n    return null;\n}\n\nconst outputs = [null, null, null, null]; // button, leverkey, rotary, other\n\nfor (const cmd of msg.artist.commands) {\n    const eventMsg = { payload: cmd, topic: msg.topic };\n    \n    if (cmd.type === 'button') {\n        outputs[0] = eventMsg;\n        node.warn(`Button ${cmd.button} ${cmd.action}`);\n    } else if (cmd.type === 'leverkey') {\n        outputs[1] = eventMsg;\n        node.warn(`LeverKey ${cmd.leverkey} ${cmd.direction}`);\n    } else if (cmd.type === 'rotary') {\n        outputs[2] = eventMsg;\n        node.warn(`Rotary ${cmd.rotary} ${cmd.action}`);\n    } else {\n        outputs[3] = eventMsg;\n    }\n}\n\nreturn outputs;",
        "outputs": 4,
        "noerr": 0,
        "x": 640,
        "y": 620
    },
    {
        "id": "debug_buttons",
        "type": "debug",
        "z": "rsp1232_example_flow",
        "name": "Button Events",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 860,
        "y": 580
    },
    {
        "id": "debug_leverkeys",
        "type": "debug",
        "z": "rsp1232_example_flow",
        "name": "LeverKey Events",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 870,
        "y": 620
    },
    {
        "id": "debug_rotary",
        "type": "debug",
        "z": "rsp1232_example_flow",
        "name": "Rotary Events",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 860,
        "y": 660
    },
    {
        "id": "comment_setup_1232",
        "type": "comment",
        "z": "rsp1232_example_flow",
        "name": "Setup Instructions",
        "info": "1. Edit RSP-1232HL Panel node\n2. Select SmartPanel Preset: RSP-1232HL\n3. Configure MQTT broker and registry\n4. Deploy\n5. Test with inject nodes",
        "x": 150,
        "y": 720
    }
]
